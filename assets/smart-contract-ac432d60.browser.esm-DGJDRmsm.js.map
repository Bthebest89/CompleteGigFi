{"version":3,"file":"smart-contract-ac432d60.browser.esm-DGJDRmsm.js","sources":["../../node_modules/@thirdweb-dev/sdk/dist/airdrop-erc1155-f9016b81.browser.esm.js","../../node_modules/@thirdweb-dev/sdk/dist/smart-contract-ac432d60.browser.esm.js"],"sourcesContent":["import { cw as AmountSchema, b9 as AddressOrEnsSchema, dm as FEATURE_ACCOUNT_PERMISSIONS, cu as AddressZero, aL as resolveAddress, dn as FEATURE_ACCOUNT, dp as FEATURE_ACCOUNT_FACTORY, au as isContractDeployed, bj as AbiSchema, a0 as extractCommentFromMetadata, K as fetchContractMetadataFromAddress, a2 as extractFunctionsFromAbi, dq as FEATURE_DYNAMIC_CONTRACT, aI as fetchPublishedContractFromPolygon, aj as joinABIs, bD as CommonContractSchema, aH as THIRDWEB_DEPLOYER, dr as FEATURE_AIRDROP_ERC20, ds as FEATURE_AIRDROP_ERC721, dt as FEATURE_AIRDROP_ERC1155 } from './index-33cd3415.browser.esm.js';\nimport { T as Transaction, f as buildTransactionFunction } from './transactions-72f9603c.browser.esm.js';\nimport { BigNumber, utils } from 'ethers';\nimport invariant from 'tiny-invariant';\nimport { L as resolveOrGenerateId } from './signature-d3ea643d.browser.esm.js';\nimport { z } from 'zod';\nimport { S as StartDateSchema, E as EndDateSchema, a as assertEnabled } from './assertEnabled-d1700f0b.browser.esm.js';\nimport { d as detectContractFeature, a as ContractEvents } from './contract-appuri-5c40af52.browser.esm.js';\nimport { f as fetchSourceFilesFromMetadata } from './fetchSourceFilesFromMetadata-906c835e.browser.esm.js';\nimport { g as getDeploymentInfo, a as deployWithThrowawayDeployer, d as deployContractDeterministic, b as generateExtensionFunctions } from './deployContractDeterministic-7823c15c.browser.esm.js';\n\nlet AdminFlag = /*#__PURE__*/function (AdminFlag) {\n  AdminFlag[AdminFlag[\"None\"] = 0] = \"None\";\n  AdminFlag[AdminFlag[\"AddAdmin\"] = 1] = \"AddAdmin\";\n  AdminFlag[AdminFlag[\"RemoveAdmin\"] = 2] = \"RemoveAdmin\";\n  return AdminFlag;\n}({});\nconst DEFAULT_PERMISSIONS = {\n  // eslint-disable-next-line better-tree-shaking/no-top-level-side-effects\n  startDate: BigNumber.from(0),\n  // eslint-disable-next-line better-tree-shaking/no-top-level-side-effects\n  expirationDate: BigNumber.from(0),\n  approvedCallTargets: [],\n  nativeTokenLimitPerTransaction: \"0\"\n};\nconst SignerPermissionsSchema = /* @__PURE__ */(() => z.object({\n  startDate: StartDateSchema,\n  expirationDate: EndDateSchema,\n  nativeTokenLimitPerTransaction: AmountSchema.default(0),\n  approvedCallTargets: z.union([z.array(AddressOrEnsSchema), z.literal(\"*\")])\n}))();\nconst PermissionSnapshotSchema = /* @__PURE__ */(() => z.array(z.object({\n  signer: AddressOrEnsSchema,\n  makeAdmin: z.boolean(),\n  permissions: SignerPermissionsSchema\n})))();\nconst SignerPermissionRequestV1 = [{\n  name: \"signer\",\n  type: \"address\"\n}, {\n  name: \"approvedTargets\",\n  type: \"address[]\"\n}, {\n  name: \"nativeTokenLimitPerTransaction\",\n  type: \"uint256\"\n}, {\n  name: \"permissionStartTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"permissionEndTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"reqValidityStartTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"reqValidityEndTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"uid\",\n  type: \"bytes32\"\n}];\nconst SignerPermissionRequest = [{\n  name: \"signer\",\n  type: \"address\"\n}, {\n  name: \"isAdmin\",\n  type: \"uint8\"\n}, {\n  name: \"approvedTargets\",\n  type: \"address[]\"\n}, {\n  name: \"nativeTokenLimitPerTransaction\",\n  type: \"uint256\"\n}, {\n  name: \"permissionStartTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"permissionEndTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"reqValidityStartTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"reqValidityEndTimestamp\",\n  type: \"uint128\"\n}, {\n  name: \"uid\",\n  type: \"bytes32\"\n}];\n\nclass AccountPermissions {\n  featureName = FEATURE_ACCOUNT_PERMISSIONS.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /*********************************\n   * HELPER FUNCTIONS\n   ********************************/\n\n  hasDuplicateSigners(snapshot) {\n    const checkedSigner = {};\n    const signers = snapshot.map(item => item.signer);\n    for (const signer of signers) {\n      if (!checkedSigner[signer]) {\n        checkedSigner[signer] = true;\n      } else {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Format the access restrictions for a given role\n   *\n   * @param restrictions - The access restrictions for a given role\n   * @returns formatted role restrictions\n   *\n   */\n  parseSignerPermissionsStruct(permissions) {\n    return {\n      startDate: new Date(parseInt(permissions.startTimestamp.toString()) * 1000),\n      expirationDate: new Date(parseInt(permissions.endTimestamp.toString()) * 1000),\n      nativeTokenLimitPerTransaction: BigNumber.from(permissions.nativeTokenLimitPerTransaction),\n      approvedCallTargets: permissions.approvedTargets\n    };\n  }\n  async sendSignerPermissionRequest(signerAddress, permissions, adminFlag) {\n    const {\n      payload,\n      signature\n    } = await this.generatePayload(signerAddress, permissions, adminFlag);\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"setPermissionsForSigner\",\n      args: [payload, signature]\n    });\n  }\n\n  /**\n   * Generate and sign a payload to grant or revoke a signer's access to the account.\n   *\n   * @param signer - The address of the signer\n   * @param roleAction - The address of the signer\n   * @returns The generated payload and signature produced on signing that payload.\n   *\n   */\n  async generatePayload(signerAddress, permissions, isAdmin) {\n    // Get payload struct.\n    const payload = {\n      signer: signerAddress,\n      isAdmin: isAdmin.valueOf(),\n      approvedTargets: permissions.approvedCallTargets === \"*\" ? [AddressZero] : permissions.approvedCallTargets,\n      nativeTokenLimitPerTransaction: utils.parseEther(permissions.nativeTokenLimitPerTransaction),\n      permissionStartTimestamp: permissions.startDate,\n      permissionEndTimestamp: permissions.expirationDate,\n      reqValidityStartTimestamp: 0,\n      // Req validity ends 10 years from now.\n      reqValidityEndTimestamp: BigNumber.from(Math.floor(new Date(Date.now() + 1000 * 60 * 60 * 24 * 365 * 10).getTime() / 1000)),\n      uid: resolveOrGenerateId(undefined)\n    };\n\n    // Generate signature\n    const chainId = await this.contractWrapper.getChainID();\n    const connectedSigner = this.contractWrapper.getSigner();\n    invariant(connectedSigner, \"No signer available\");\n    const signature = await this.contractWrapper.signTypedData(connectedSigner, {\n      name: \"Account\",\n      version: \"1\",\n      chainId,\n      verifyingContract: this.getAddress()\n    }, {\n      SignerPermissionRequest\n    }, payload);\n    return {\n      payload,\n      signature\n    };\n  }\n  async generateLegacyPayload(signerAddress, permissions) {\n    if (permissions.approvedCallTargets === \"*\") {\n      throw new Error(\"Wildcard call targets are not supported on legacy account permissions contract, please deploy an updated contract factory.\");\n    }\n    // legacy account permissions contract\n    // admin is set only via EOA\n    // signer permissions are set via EOA or admin but no wildcard\n    const payload = {\n      signer: signerAddress,\n      approvedTargets: permissions.approvedCallTargets,\n      nativeTokenLimitPerTransaction: utils.parseEther(permissions.nativeTokenLimitPerTransaction),\n      permissionStartTimestamp: permissions.startDate,\n      permissionEndTimestamp: permissions.expirationDate,\n      reqValidityStartTimestamp: 0,\n      // Req validity ends 10 years from now.\n      reqValidityEndTimestamp: BigNumber.from(Math.floor(new Date(Date.now() + 1000 * 60 * 60 * 24 * 365 * 10).getTime() / 1000)),\n      uid: resolveOrGenerateId(undefined)\n    };\n    const chainId = await this.contractWrapper.getChainID();\n    const connectedSigner = this.contractWrapper.getSigner();\n    invariant(connectedSigner, \"No signer available\");\n    const signature = await this.contractWrapper.signTypedData(connectedSigner, {\n      name: \"Account\",\n      version: \"1\",\n      chainId,\n      verifyingContract: this.getAddress()\n    }, {\n      SignerPermissionRequest: SignerPermissionRequestV1\n    }, payload);\n    return {\n      payload,\n      signature\n    };\n  }\n\n  /*********************************\n   * READ FUNCTIONS\n   ********************************/\n\n  /**\n   * Get whether a signer is an admin on the account.\n   *\n   * @example\n   * ```javascript\n   * const isAdmin = await contract.account.isAdmin(signer);\n   * ```\n   * @param signer - The address of a signer of the account.\n   * @returns whether a signer is an admin on the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async isAdmin(signerAddress) {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    return await this.contractWrapper.read(\"isAdmin\", [resolvedSignerAddress]);\n  }\n\n  /**\n   * Get whether a signer has permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const isAdmin = await contract.account.isSigner(signer);\n   * ```\n   * @param signer - The address of a signer of the account.\n   * @returns whether a signer has permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async isSigner(signerAddress) {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    return await this.contractWrapper.read(\"isActiveSigner\", [resolvedSignerAddress]);\n  }\n\n  /**\n   * Get all admins of the account.\n   *\n   * @example\n   * ```javascript\n   * const allAdmins = await contract.account.getAllAdmins();\n   * ```\n   *\n   * @returns All admins of the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllAdmins() {\n    return await this.contractWrapper.read(\"getAllAdmins\", []);\n  }\n\n  /**\n   * Get all (non-admin) signers with permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const allSigners = await contract.account.getAllSigners();\n   * ```\n   *\n   * @returns All (non-admin) signers with permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllSigners() {\n    const activeSignersWithPerms = await this.contractWrapper.read(\"getAllActiveSigners\", []);\n    return await Promise.all(activeSignersWithPerms.map(async signerWithPermissions => {\n      const signer = signerWithPermissions.signer;\n      const permissions = this.parseSignerPermissionsStruct(signerWithPermissions);\n      return {\n        signer,\n        permissions\n      };\n    }));\n  }\n\n  /**\n   * Get all admins and non-admin signers with permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const allAdminsAndSigners = await contract.account.getAllAdminsAndSigners();\n   * ```\n   *\n   * @returns All admins and non-admin signers with permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllAdminsAndSigners() {\n    const allAdmins = await this.getAllAdmins();\n    const transformedAdmins = allAdmins.map(admin => {\n      return {\n        isAdmin: true,\n        signer: admin,\n        permissions: {\n          startDate: new Date(0),\n          expirationDate: new Date(0),\n          nativeTokenLimitPerTransaction: BigNumber.from(0),\n          approvedCallTargets: []\n        }\n      };\n    });\n    const allSigners = await this.getAllSigners();\n    return [...transformedAdmins, ...allSigners];\n  }\n\n  /*********************************\n   * WRITE FUNCTIONS\n   ********************************/\n\n  /**\n   * Grant an address admin access to the account.\n   *\n   * @remarks Grants an address admin access to the account. The admin will have complete authority over the account.\n   *\n   * @param signer - The address to be granted admin access to the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.grantAdminAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  grantAdminPermissions = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, DEFAULT_PERMISSIONS, AdminFlag.AddAdmin);\n  });\n\n  /**\n   * Revoke an address' admin access to the account.\n   *\n   * @remarks Revokes an address' admin access to the account.\n   *\n   * @param signer - The address of an admin of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.revokeAdminAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  revokeAdminPermissions = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, DEFAULT_PERMISSIONS, AdminFlag.RemoveAdmin);\n  });\n\n  /**\n   * Grant a signer permissions to use the account.\n   *\n   * @remarks Grants a signer permissions to use the account.\n   *\n   * @param signer - The signer to be granted permissions to use the account.\n   * @param permissions - The permissions to be applied to the signer's use of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.grantPermissions(signer, permissions);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  grantPermissions = /* @__PURE__ */buildTransactionFunction(async (signerAddress, permissions) => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    const resolvedPermissions = await SignerPermissionsSchema.parseAsync(permissions);\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, resolvedPermissions, AdminFlag.None);\n  });\n\n  /**\n   * Update the permissions of a signer for using the account.\n   *\n   * @remarks Updates the permissions of a signer for using the account.\n   *\n   * @param signer - The signer whose permissions to use the account are to be updated.\n   * @param permissions - The permissions to be applied to the signer's use of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.updatePermissions(signer, permissions);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  updatePermissions = /* @__PURE__ */buildTransactionFunction(async (signerAddress, permissions) => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    const resolvedPermissions = await SignerPermissionsSchema.parseAsync(permissions);\n    if (await this.isAdmin(resolvedSignerAddress)) {\n      throw new Error(\"Signer is already an admin. Cannot update permissions of an existing admin.\");\n    }\n    if (!(await this.isSigner(resolvedSignerAddress))) {\n      throw new Error(\"Signer does not already have permissions. You can grant permissions using `grantPermissions`.\");\n    }\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, resolvedPermissions, AdminFlag.None);\n  });\n\n  /**\n   * Revoke a scoped access address to the account\n   *\n   * @remarks Revokes an address' access to the account.\n   *\n   * @param signer - The address whose access to the account is to be revoked.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.revokeAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  revokeAccess = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, {\n      startDate: BigNumber.from(0),\n      expirationDate: BigNumber.from(0),\n      approvedCallTargets: [],\n      nativeTokenLimitPerTransaction: \"0\"\n    }, AdminFlag.None);\n  });\n\n  /**\n   * Approve an address as a call target for a given signer on the account\n   *\n   * @remarks Approves an address as a call target for a given signer on the account.\n   *\n   * @param signer - A signer with restricted access to the account.\n   * @param target - The address to approve as a call target for the signer.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.approveTargetForSigner(signer, target);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  approveTargetForSigner = /* @__PURE__ */buildTransactionFunction(async (signerAddress, target) => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    const resolvedTarget = await resolveAddress(target);\n    if (await this.isAdmin(resolvedSignerAddress)) {\n      throw new Error(\"Signer is already an admin. Cannot approve targets for an admin.\");\n    }\n    if (!(await this.isSigner(resolvedSignerAddress))) {\n      throw new Error(\"Signer does not already have permissions. You can grant permissions using `grantPermissions`.\");\n    }\n    const permissions = await this.contractWrapper.read(\"getPermissionsForSigner\", [resolvedSignerAddress]);\n    if (permissions.approvedTargets.includes(target)) {\n      throw new Error(\"Target is already approved\");\n    }\n    const newTargets = [...permissions.approvedTargets, resolvedTarget];\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, {\n      startDate: BigNumber.from(permissions.startTimestamp),\n      expirationDate: BigNumber.from(permissions.endTimestamp),\n      approvedCallTargets: newTargets,\n      nativeTokenLimitPerTransaction: permissions.nativeTokenLimitPerTransaction.toString()\n    }, AdminFlag.None);\n  });\n\n  /**\n   * Disapprove an address as a call target for a given signer on the account\n   *\n   * @remarks Disapprove an address as a call target for a given signer on the account.\n   *\n   * @param signer - A signer with restricted access to the account.\n   * @param target - The address to disapprove as a call target for the signer.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.disapproveTargetForSigner(signer, target);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  disapproveTargetForSigner = /* @__PURE__ */buildTransactionFunction(async (signerAddress, target) => {\n    const resolvedSignerAddress = await resolveAddress(signerAddress);\n    const resolvedTarget = await resolveAddress(target);\n    if (await this.isAdmin(resolvedSignerAddress)) {\n      throw new Error(\"Signer is already an admin. Cannot approve targets for an admin.\");\n    }\n    if (!(await this.isSigner(resolvedSignerAddress))) {\n      throw new Error(\"Signer does not already have permissions. You can grant permissions using `grantPermissions`.\");\n    }\n    const permissions = await this.contractWrapper.read(\"getPermissionsForSigner\", [resolvedSignerAddress]);\n    if (!permissions.approvedTargets.includes(resolvedTarget)) {\n      throw new Error(\"Target is currently not approved\");\n    }\n    const newTargets = permissions.approvedTargets.filter(approvedTarget => utils.getAddress(approvedTarget) !== utils.getAddress(resolvedTarget));\n    return await this.sendSignerPermissionRequest(resolvedSignerAddress, {\n      startDate: BigNumber.from(permissions.startTimestamp),\n      expirationDate: BigNumber.from(permissions.endTimestamp),\n      approvedCallTargets: newTargets,\n      nativeTokenLimitPerTransaction: permissions.nativeTokenLimitPerTransaction.toString()\n    }, AdminFlag.None);\n  });\n\n  /**\n   * Set the account's entire snapshot of permissions.\n   *\n   * @remarks Sets the account's entire snapshot of permissions.\n   *\n   * @param permissionSnapshot - the snapshot to set as the account's entire permission snapshot.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.setAccess(permissionSnapshot);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  resetAllPermissions = /* @__PURE__ */buildTransactionFunction(async permissionSnapshot => {\n    const resolvedSnapshot = await PermissionSnapshotSchema.parseAsync(permissionSnapshot);\n\n    /**\n     * All cases\n     *\n     * - Add new admin :check:\n     * - Remove current admin :check:\n     * - Add new scoped :check:\n     * - Remove current scoped :check:\n     * - Update current scoped :check:\n     * - Current admin - new scoped :check:\n     * - Current scoped - new admin :check:\n     **/\n\n    // No duplicate signers in input!\n    if (this.hasDuplicateSigners(resolvedSnapshot)) {\n      throw new Error(\"Duplicate signers found in input.\");\n    }\n    const removeAdminData = [];\n    const addOrUpdateSignerData = [];\n    const removeSignerData = [];\n\n    // Remove all existing admins not included in the passed snapshot.\n    const allAdmins = await this.getAllAdmins();\n    const allToMakeAdmin = resolvedSnapshot.filter(item => item.makeAdmin).map(item => item.signer);\n    allAdmins.forEach(async admin => {\n      if (!allToMakeAdmin.includes(admin)) {\n        const data = (await this.sendSignerPermissionRequest(admin, DEFAULT_PERMISSIONS, AdminFlag.RemoveAdmin)).encode();\n        removeAdminData.push(data);\n      }\n    });\n\n    // Remove all existing signers not included in the passed snapshot.\n    const allSigners = await this.getAllSigners();\n    const allToMakeSigners = resolvedSnapshot.filter(item => {\n      return !item.makeAdmin;\n    }).map(item => item.signer);\n    await Promise.all(allSigners.map(async item => {\n      if (!allToMakeSigners.includes(item.signer)) {\n        const data = (await this.sendSignerPermissionRequest(item.signer, DEFAULT_PERMISSIONS, AdminFlag.None)).encode();\n        removeSignerData.push(data);\n      }\n    }));\n    for (const member of resolvedSnapshot) {\n      // Add new admin\n      if (member.makeAdmin) {\n        (await this.sendSignerPermissionRequest(member.signer, DEFAULT_PERMISSIONS, AdminFlag.AddAdmin)).encode();\n      } else {\n        // Add new scoped\n        const data = (await this.sendSignerPermissionRequest(member.signer, member.permissions, AdminFlag.None)).encode();\n        addOrUpdateSignerData.push(data);\n      }\n    }\n    const data = [];\n    removeAdminData.forEach(item => {\n      data.push(item);\n    });\n    removeSignerData.forEach(item => {\n      data.push(item);\n    });\n    addOrUpdateSignerData.forEach(item => {\n      data.push(item);\n    });\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"multicall\",\n      args: [data]\n    });\n  });\n}\n\n/**\n * Interact with ERC-4337 accounts\n * @remarks Exposes useful functions available on account contracts.\n * @example\n * ```javascript\n * const contract = await sdk.getContract(\"{{contract_address}}\");\n * await contract.account.getAllAdminsAndSigners();\n * ```\n * @public\n */\nclass Account {\n  featureName = FEATURE_ACCOUNT.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n    this.accountPermissions = this.detectAccountPermissions();\n  }\n  detectAccountPermissions() {\n    if (detectContractFeature(this.contractWrapper, \"AccountPermissions\") || detectContractFeature(this.contractWrapper, \"AccountPermissionsV1\")) {\n      return new AccountPermissions(this.contractWrapper);\n    }\n    return undefined;\n  }\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /*********************************\n   * READ FUNCTIONS\n   ********************************/\n\n  /**\n   * Get whether a signer is an admin on the account.\n   *\n   * @example\n   * ```javascript\n   * const isAdmin = await contract.account.isAdmin(signer);\n   * ```\n   * @param signer - The address of a signer of the account.\n   * @returns whether a signer is an admin on the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async isAdmin(signerAddress) {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).isAdmin(signerAddress);\n  }\n\n  /**\n   * Get whether a signer has permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const isAdmin = await contract.account.isSigner(signer);\n   * ```\n   * @param signer - The address of a signer of the account.\n   * @returns whether a signer has permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async isSigner(signerAddress) {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).isSigner(signerAddress);\n  }\n\n  /**\n   * Get all admins of the account.\n   *\n   * @example\n   * ```javascript\n   * const allAdmins = await contract.account.getAllAdmins();\n   * ```\n   *\n   * @returns All admins of the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllAdmins() {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).getAllAdmins();\n  }\n\n  /**\n   * Get all (non-admin) signers with permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const allSigners = await contract.account.getAllSigners();\n   * ```\n   *\n   * @returns All (non-admin) signers with permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllSigners() {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).getAllSigners();\n  }\n\n  /**\n   * Get all admins and non-admin signers with permissions to use the account.\n   *\n   * @example\n   * ```javascript\n   * const allAdminsAndSigners = await contract.account.getAllAdminsAndSigners();\n   * ```\n   *\n   * @returns All admins and non-admin signers with permissions to use the account.\n   *\n   * @twfeature AccountPermissions\n   */\n  async getAllAdminsAndSigners() {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).getAllAdminsAndSigners();\n  }\n\n  /*********************************\n   * WRITE FUNCTIONS\n   ********************************/\n\n  /**\n   * Grant an address admin access to the account.\n   *\n   * @remarks Grants an address admin access to the account. The admin will have complete authority over the account.\n   *\n   * @param signer - The address to be granted admin access to the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.grantAdminAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  grantAdminPermissions = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).grantAdminPermissions.prepare(signerAddress);\n  });\n\n  /**\n   * Revoke an address' admin access to the account.\n   *\n   * @remarks Revokes an address' admin access to the account.\n   *\n   * @param signer - The address of an admin of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.revokeAdminAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  revokeAdminPermissions = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).revokeAdminPermissions.prepare(signerAddress);\n  });\n\n  /**\n   * Grant a signer permissions to use the account.\n   *\n   * @remarks Grants a signer permissions to use the account.\n   *\n   * @param signer - The signer to be granted permissions to use the account.\n   * @param permissions - The permissions to be applied to the signer's use of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.grantPermissions(signer, permissions);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  grantPermissions = /* @__PURE__ */buildTransactionFunction(async (signerAddress, permissions) => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).grantPermissions.prepare(signerAddress, permissions);\n  });\n\n  /**\n   * Update the permissions of a signer for using the account.\n   *\n   * @remarks Updates the permissions of a signer for using the account.\n   *\n   * @param signer - The signer whose permissions to use the account are to be updated.\n   * @param permissions - The permissions to be applied to the signer's use of the account.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.updateAccess(signer, restrictions);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  updatePermissions = /* @__PURE__ */buildTransactionFunction(async (signerAddress, permissions) => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).updatePermissions.prepare(signerAddress, permissions);\n  });\n\n  /**\n   * Revoke a scoped access address to the account\n   *\n   * @remarks Revokes an address' access to the account.\n   *\n   * @param signer - The address whose access to the account is to be revoked.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.revokeAccess(signer);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  revokeAccess = /* @__PURE__ */buildTransactionFunction(async signerAddress => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).revokeAccess.prepare(signerAddress);\n  });\n\n  /**\n   * Approve an address as a call target for a given signer on the account\n   *\n   * @remarks Approves an address as a call target for a given signer on the account.\n   *\n   * @param signer - A signer with restricted access to the account.\n   * @param target - The address to approve as a call target for the signer.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.approveTargetForSigner(signer, target);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  approveTargetForSigner = /* @__PURE__ */buildTransactionFunction(async (signerAddress, target) => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).approveTargetForSigner.prepare(signerAddress, target);\n  });\n\n  /**\n   * Disapprove an address as a call target for a given signer on the account\n   *\n   * @remarks Disapprove an address as a call target for a given signer on the account.\n   *\n   * @param signer - A signer with restricted access to the account.\n   * @param target - The address to disapprove as a call target for the signer.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.disapproveTargetForSigner(signer, target);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  disapproveTargetForSigner = /* @__PURE__ */buildTransactionFunction(async (signerAddress, target) => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).disapproveTargetForSigner.prepare(signerAddress, target);\n  });\n\n  /**\n   * Set the account's entire snapshot of permissions.\n   *\n   * @remarks Sets the account's entire snapshot of permissions.\n   *\n   * @param permissionSnapshot - the snapshot to set as the account's entire permission snapshot.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.account.setAccess(permissionSnapshot);\n   * const receipt = tx.receipt();\n   * ```\n   *\n   * @twfeature AccountPermissions\n   */\n  resetAllPermissions = /* @__PURE__ */buildTransactionFunction(async permissionSnapshot => {\n    return assertEnabled(this.accountPermissions, FEATURE_ACCOUNT_PERMISSIONS).resetAllPermissions.prepare(permissionSnapshot);\n  });\n}\n\n/**\n * Interact with ERC-4337 account factory contracts\n * @remarks Exposes useful functions available on the account factory contract.\n * @example\n * ```javascript\n * const contract = await sdk.getContract(\"{{contract_address}}\");\n * await contract.accountFactory.predictAccountAddress(walletAddress);\n * ```\n * @public\n */\nclass AccountFactory {\n  featureName = FEATURE_ACCOUNT_FACTORY.name;\n\n  // utilities\n\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n    this.events = new ContractEvents(this.contractWrapper);\n  }\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /*********************************\n   * READ FUNCTIONS\n   *******************************/\n\n  /**\n   * Get the deterministic address of the account that will be created\n   *\n   * @example\n   * ```javascript\n   * const accountAddress = await contract.accountFactory.predictAccountAddress(admin);\n   * ```\n   * @param admin - The admin of the account.\n   * @param extraData - (Optional) Extra data to be passed to the account on creation.\n   * @returns The deterministic address of the account that will be created for the given admin.\n   *\n   * @twfeature AccountFactory\n   */\n  async predictAccountAddress(admin, extraData) {\n    let data = utils.toUtf8Bytes(\"\");\n    if (extraData) {\n      data = extraData;\n    }\n    return this.contractWrapper.read(\"getAddress\", [admin, data]);\n  }\n\n  /**\n   * Get all accounts on which the given signer has authority\n   *\n   * @example\n   * ```javascript\n   * const allAccounts = await contract.accountFactory.getAssociatedAccounts(admin);\n   * ```\n   * @param signer - The account address.\n   * @returns All accounts on which the given signer has authority.\n   *\n   * @twfeature AccountFactory\n   */\n  async getAssociatedAccounts(signer) {\n    return this.contractWrapper.read(\"getAccountsOfSigner\", [signer]);\n  }\n\n  /**\n   * Get all accounts\n   *\n   * @example\n   * ```javascript\n   * const allAccounts = await contract.accountFactory.getAllAccounts();\n   * ```\n   *\n   * @returns All accounts created via the account factory.\n   *\n   * @twfeature AccountFactory\n   */\n  async getAllAccounts() {\n    return await this.contractWrapper.read(\"getAllAccounts\", []);\n  }\n\n  /**\n   * Check if a account has been deployed for the given admin\n   *\n   * @param admin - The admin of the account.\n   * @param extraData - (Optional) Extra data to be passed to the account on creation.\n   * @returns whether the account has been deployed for the given admin.\n   */\n  async isAccountDeployed(admin, extraData) {\n    const addr = await this.predictAccountAddress(admin, extraData);\n    return isContractDeployed(addr, this.contractWrapper.getProvider());\n  }\n\n  /*********************************\n   * WRITE FUNCTIONS\n   *******************************/\n\n  /**\n   * Create a account\n   *\n   * @remarks Create a account for an admin. The admin will have complete authority over the account.\n   *\n   * @param admin - The admin of the account.\n   * @param extraData - (Optional) Extra data to be passed to the account on creation.\n   *\n   * @example\n   * ```javascript\n   * const tx = await contract.accountFactory.createAccount(admin, extraData);\n   * const receipt = tx.receipt();\n   * const accountAddress = tx.address;\n   * ```\n   *\n   * @twfeature AccountFactory\n   */\n  createAccount = /* @__PURE__ */buildTransactionFunction(async (accountAdmin, extraData) => {\n    if (await this.isAccountDeployed(accountAdmin, extraData)) {\n      throw new Error(`Account already deployed for admin: ${accountAdmin}`);\n    }\n    let data = utils.toUtf8Bytes(\"\");\n    if (extraData) {\n      data = extraData;\n    }\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"createAccount\",\n      args: [accountAdmin, data],\n      parse: receipt => {\n        const event = this.contractWrapper.parseLogs(\"AccountCreated\", receipt?.logs);\n        return {\n          address: event[0].args.account,\n          receipt\n        };\n      }\n    });\n  });\n}\n\n/**\n * @internal\n * @param abi - The abi to extract events from\n * @param metadata - The metadata to extract comments from\n */\nfunction extractEventsFromAbi(abi, metadata) {\n  const parsedAbi = AbiSchema.parse(abi || []);\n  const events = parsedAbi.filter(el => el.type === \"event\");\n  const parsed = [];\n  for (const e of events) {\n    const doc = extractCommentFromMetadata(e.name, metadata, \"events\");\n    parsed.push({\n      inputs: e.inputs || [],\n      outputs: e.outputs || [],\n      name: e.name || \"unknown\",\n      comment: doc\n    });\n  }\n  return parsed;\n}\n\n/**\n * Handles publish metadata for a contract\n * @internal\n */\nclass ContractPublishedMetadata {\n  constructor(contractWrapper, storage) {\n    this.contractWrapper = contractWrapper;\n    this.storage = storage;\n  }\n\n  /**\n   * Get the published metadata for this contract\n   * @public\n   */\n  async get() {\n    if (this._cachedMetadata) {\n      return this._cachedMetadata;\n    }\n    this._cachedMetadata = await fetchContractMetadataFromAddress(this.contractWrapper.address, this.contractWrapper.getProvider(), this.storage, this.contractWrapper.options);\n    return this._cachedMetadata;\n  }\n\n  /**\n   * @public\n   */\n  async extractSources() {\n    const publishedMetadata = await this.get();\n    return fetchSourceFilesFromMetadata(publishedMetadata, this.storage);\n  }\n\n  /**\n   * @public\n   */\n  async extractFunctions() {\n    let publishedMetadata;\n    try {\n      publishedMetadata = await this.get();\n    } catch (e) {\n      // ignore for built-in contracts\n    }\n    // to construct a contract we already **have** to have the abi on the contract wrapper, so there is no reason to look fetch it again (means this function can become synchronous as well!)\n    return extractFunctionsFromAbi(AbiSchema.parse(this.contractWrapper.abi), publishedMetadata?.metadata);\n  }\n\n  /**\n   * @public\n   */\n  async extractEvents() {\n    let publishedMetadata;\n    try {\n      publishedMetadata = await this.get();\n    } catch (e) {\n      // ignore for built-in contracts\n    }\n    // to construct a contract we already **have** to have the abi on the contract wrapper, so there is no reason to look fetch it again (means this function can become synchronous as well!)\n    return extractEventsFromAbi(AbiSchema.parse(this.contractWrapper.abi), publishedMetadata?.metadata);\n  }\n}\n\nclass ExtensionManager {\n  featureName = FEATURE_DYNAMIC_CONTRACT.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n  getAddress() {\n    return this.contractWrapper.readContract.address;\n  }\n\n  /** ******************************\n   * READ FUNCTIONS\n   *******************************/\n\n  async getAll() {\n    const extensions = await this.contractWrapper.readContract.getAllExtensions();\n    return extensions;\n  }\n  async get(extensionName) {\n    const extension = await this.contractWrapper.readContract.getExtension(extensionName);\n    return extension;\n  }\n  async getExtensionAddress(extensionName) {\n    const extension = await this.get(extensionName);\n    return extension.metadata.implementation;\n  }\n  async getAllFunctions(extensionName) {\n    const extension = await this.get(extensionName);\n    return extension.functions;\n  }\n  async getExtensionForFunction(functionInput) {\n    let selector = functionInput.functionSelector;\n    if (!selector) {\n      invariant(functionInput.functionSignature, \"Atleast one of function selector and signature must be provided\");\n      selector = utils.id(functionInput.functionSignature).substring(0, 10);\n    }\n    const extensionMetadata = await this.contractWrapper.readContract.getMetadataForFunction(selector);\n    return extensionMetadata;\n  }\n  async getExtensionAddressForFunction(functionInput) {\n    const extensionMetadata = await this.getExtensionForFunction(functionInput);\n    return extensionMetadata.implementation;\n  }\n\n  /** ******************************\n   * WRITE FUNCTIONS\n   *******************************/\n\n  /**\n   * Adds an extension to the contract\n   */\n  add = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"addExtension\",\n      args: [inputArgs.extension],\n      parse: async receipt => {\n        const events = this.contractWrapper.parseLogs(\"ExtensionAdded\", receipt.logs);\n        if (events.length < 1) {\n          throw new Error(\"No ExtensionAdded event found\");\n        }\n        const extensionAbi = inputArgs.extensionAbi ? AbiSchema.parse(inputArgs.extensionAbi) : (await fetchContractMetadataFromAddress(inputArgs.extension.metadata.implementation, this.contractWrapper.getProvider(), this.contractWrapper.storage)).abi;\n        const abiToAdd = this.filterAbiForAdd(extensionAbi, inputArgs.extension);\n        const updatedAbi = joinABIs([AbiSchema.parse(this.contractWrapper.abi), abiToAdd]);\n        this.contractWrapper.updateAbi(updatedAbi);\n        return receipt;\n      }\n    });\n  });\n\n  /**\n   * Adds a deployed extension to the contract\n   */\n  addDeployed = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    let extensionAbi = inputArgs.extensionAbi;\n    if (!extensionAbi) {\n      const metadata = await fetchContractMetadataFromAddress(inputArgs.extensionAddress, this.contractWrapper.getProvider(), this.contractWrapper.storage, this.contractWrapper.options);\n      extensionAbi = metadata.abi;\n    }\n    invariant(extensionAbi, \"Require extension ABI\");\n    let extensionMetadataUri = \"\";\n    if (inputArgs.extensionMetadata) {\n      if (typeof inputArgs.extensionMetadata === \"string\") {\n        extensionMetadataUri = inputArgs.extensionMetadata;\n      } else {\n        const parsedMetadata = await CommonContractSchema.parseAsync(inputArgs.extensionMetadata);\n        extensionMetadataUri = await this.contractWrapper.storage.upload(parsedMetadata);\n      }\n    }\n    const extensionFunctions = generateExtensionFunctions(AbiSchema.parse(extensionAbi));\n    const extension = {\n      metadata: {\n        name: inputArgs.extensionName,\n        metadataURI: extensionMetadataUri,\n        implementation: inputArgs.extensionAddress\n      },\n      functions: extensionFunctions\n    };\n    return this.add.prepare({\n      extension,\n      extensionAbi\n    });\n  });\n\n  /**\n   * Adds a published extension to the contract, and deploys it deterministically if necessary\n   */\n  addPublished = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    const version = inputArgs.version || \"latest\";\n    const {\n      deployedExtensionAddress,\n      extensionMetadata\n    } = await this.deployExtension(inputArgs.extensionName, inputArgs.publisherAddress || THIRDWEB_DEPLOYER, version);\n    return this.addDeployed.prepare({\n      extensionName: inputArgs.extensionName,\n      extensionAddress: deployedExtensionAddress,\n      extensionMetadata: inputArgs.extensionMetadataOverride || extensionMetadata\n    });\n  });\n  replace = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"replaceExtension\",\n      args: [inputArgs.extension],\n      parse: async receipt => {\n        const events = this.contractWrapper.parseLogs(\"ExtensionReplaced\", receipt.logs);\n        if (events.length < 1) {\n          throw new Error(\"No ExtensionReplaced event found\");\n        }\n        const extensionAbi = inputArgs.extensionAbi ? AbiSchema.parse(inputArgs.extensionAbi) : (await fetchContractMetadataFromAddress(inputArgs.extension.metadata.implementation, this.contractWrapper.getProvider(), this.contractWrapper.storage)).abi;\n        const contractAbi = this.filterAbiForRemove(AbiSchema.parse(this.contractWrapper.abi), extensionAbi);\n        const abiToAdd = this.filterAbiForAdd(extensionAbi, inputArgs.extension);\n        const updatedAbi = joinABIs([contractAbi, abiToAdd]);\n        this.contractWrapper.updateAbi(updatedAbi);\n        return receipt;\n      }\n    });\n  });\n  replaceDeployed = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    let extensionAbi = inputArgs.extensionAbi;\n    if (!extensionAbi) {\n      const metadata = await fetchContractMetadataFromAddress(inputArgs.extensionAddress, this.contractWrapper.getProvider(), this.contractWrapper.storage, this.contractWrapper.options);\n      extensionAbi = metadata.abi;\n    }\n    invariant(extensionAbi, \"Require extension ABI\");\n    let extensionMetadataUri = \"\";\n    if (inputArgs.extensionMetadata) {\n      if (typeof inputArgs.extensionMetadata === \"string\") {\n        extensionMetadataUri = inputArgs.extensionMetadata;\n      } else {\n        const parsedMetadata = await CommonContractSchema.parseAsync(inputArgs.extensionMetadata);\n        extensionMetadataUri = await this.contractWrapper.storage.upload(parsedMetadata);\n      }\n    }\n    const extensionFunctions = generateExtensionFunctions(AbiSchema.parse(extensionAbi));\n    const extension = {\n      metadata: {\n        name: inputArgs.extensionName,\n        metadataURI: extensionMetadataUri,\n        implementation: inputArgs.extensionAddress\n      },\n      functions: extensionFunctions\n    };\n    return this.replace.prepare({\n      extension,\n      extensionAbi\n    });\n  });\n  replacePublished = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    const version = inputArgs.version || \"latest\";\n    const {\n      deployedExtensionAddress,\n      extensionMetadata\n    } = await this.deployExtension(inputArgs.extensionName, inputArgs.publisherAddress || THIRDWEB_DEPLOYER, version);\n    return this.replaceDeployed.prepare({\n      extensionName: inputArgs.extensionName,\n      extensionAddress: deployedExtensionAddress,\n      extensionMetadata: inputArgs.extensionMetadataOverride || extensionMetadata\n    });\n  });\n  remove = /* @__PURE__ */buildTransactionFunction(async inputArgs => {\n    const extensionAddress = await this.getExtensionAddress(inputArgs.extensionName);\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"removeExtension\",\n      args: [inputArgs.extensionName],\n      parse: async receipt => {\n        const events = this.contractWrapper.parseLogs(\"ExtensionRemoved\", receipt.logs);\n        if (events.length < 1) {\n          throw new Error(\"No ExtensionRemoved event found\");\n        }\n        const extensionAbi = (await fetchContractMetadataFromAddress(extensionAddress, this.contractWrapper.getProvider(), this.contractWrapper.storage)).abi;\n        const updatedAbi = this.filterAbiForRemove(AbiSchema.parse(this.contractWrapper.abi), extensionAbi);\n        this.contractWrapper.updateAbi(updatedAbi);\n        return receipt;\n      }\n    });\n  });\n\n  /** ******************************\n   * Internal / private\n   *******************************/\n\n  filterAbiForAdd(extensionAbi, extension) {\n    const extensionAbiInterface = new utils.Interface(extensionAbi);\n    const extensionFunctionSelectors = extension.functions.map(fn => fn.functionSelector);\n    const filtered = extensionAbi.filter(item => {\n      const fnFragment = Object.values(new utils.Interface([item]).functions);\n      if (fnFragment.length === 0) {\n        return false;\n      }\n      const fnSigHash = extensionAbiInterface.getSighash(fnFragment[0]);\n      return extensionFunctionSelectors.includes(fnSigHash);\n    });\n    return filtered;\n  }\n  filterAbiForRemove(fullAbi, abiToRemove) {\n    const fullAbiInterface = new utils.Interface(fullAbi);\n    const interfaceToRemove = new utils.Interface(abiToRemove);\n    const functionsToRemove = Object.values(interfaceToRemove.functions).map(fn => interfaceToRemove.getSighash(fn));\n    const filtered = fullAbi.filter(item => {\n      const fnFragment = Object.values(new utils.Interface([item]).functions);\n      if (fnFragment.length === 0) {\n        return false;\n      }\n      const fnSigHash = fullAbiInterface.getSighash(fnFragment[0]);\n      return !functionsToRemove.includes(fnSigHash);\n    });\n    return filtered;\n  }\n  async deployExtension(extensionName, publisherAddress) {\n    let version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"latest\";\n    const published = await fetchPublishedContractFromPolygon(publisherAddress, extensionName, version, this.contractWrapper.storage, this.contractWrapper.options.clientId, this.contractWrapper.options.secretKey);\n    const deploymentInfo = await getDeploymentInfo(published.metadataUri, this.contractWrapper.storage, this.contractWrapper.getProvider(), \"\", this.contractWrapper.options.clientId, this.contractWrapper.options.secretKey);\n    const implementationAddress = deploymentInfo.find(i => i.type === \"implementation\")?.transaction.predictedAddress;\n\n    // deploy infra + plugins + implementation using a throwaway Deployer contract\n\n    // filter out already deployed contracts (data is empty)\n    const transactionsToSend = deploymentInfo.filter(i => i.transaction.data && i.transaction.data.length > 0);\n    const transactionsforDirectDeploy = transactionsToSend.filter(i => {\n      return i.type !== \"infra\";\n    }).map(i => i.transaction);\n    const transactionsForThrowawayDeployer = transactionsToSend.filter(i => {\n      return i.type === \"infra\";\n    }).map(i => i.transaction);\n    const signer = this.contractWrapper.getSigner();\n    invariant(signer, \"Signer is required\");\n\n    // deploy via throwaway deployer, multiple infra contracts in one transaction\n    await deployWithThrowawayDeployer(signer, transactionsForThrowawayDeployer, {});\n\n    // send each transaction directly to Create2 factory\n    // process txns one at a time\n    for (const tx of transactionsforDirectDeploy) {\n      try {\n        await deployContractDeterministic(signer, tx);\n      } catch (e) {\n        console.debug(`Error deploying contract at ${tx.predictedAddress}`, e?.message);\n      }\n    }\n    return {\n      deployedExtensionAddress: implementationAddress,\n      extensionMetadata: published.metadataUri\n    };\n  }\n}\n\n/**\n * @public\n */\nclass Airdrop20 {\n  featureName = FEATURE_AIRDROP_ERC20.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n\n  /**\n   * @internal\n   */\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /** ******************************\n   * WRITE FUNCTIONS\n   *******************************/\n\n  /**\n   * Perform airdrop of ERC20 tokens\n   *\n   * @example\n   * ```javascript\n   * // Airdrop content array, with recipients and token amounts\n   * const contents = [\n   *      {\n   *        recipient: \"0xabc...\", // first recipient address\n   *        amount: \"10\" // number of tokens in wei units\n   *      },\n   *      {\n   *        recipient: \"0x123...\", // second recipient address\n   *        amount: \"20\" // number of tokens in wei units\n   *      }\n   *   ]\n   *\n   * const tokenAddress = \"0x...\" // Address of the ERC20 token being airdropped\n   * const tokenOwner = \"0x...\" // Address of the owner of the tokens being airdropped\n   *\n   * const output = await contract.airdrop20.drop(tokenAddress, tokenOwner, contents);\n   *\n   * // the `output` return value above contains:\n   * //     - count of successful and failed drops\n   * //     - array containing failed drops, if any\n   *\n   * ```\n   * @param tokenAddress - Address of the ERC20 token being airdropped\n   * @param tokenOwner - Address of the owner of the tokens being airdropped\n   * @param contents - Array of airdrop contents\n   *\n   * @returns An array of recipients for who the airdrop failed (empty means all transfers were successful)\n   * @twfeature AirdropERC20\n   */\n  drop = /* @__PURE__ */buildTransactionFunction(async (tokenAddress, tokenOwner, contents) => {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"airdropERC20\",\n      args: [tokenAddress, tokenOwner, contents],\n      parse: receipt => {\n        const events = this.contractWrapper.parseLogs(\"AirdropFailed\", receipt.logs);\n        const failedDrops = events.map(e => {\n          return {\n            recipient: e.args.recipient,\n            amount: e.args.amount.toString()\n          };\n        });\n        return {\n          successfulDropCount: contents.length - failedDrops.length,\n          failedDropCount: failedDrops.length,\n          failedDrops\n        };\n      }\n    });\n  });\n}\n\n/**\n * @public\n */\nclass Airdrop721 {\n  featureName = FEATURE_AIRDROP_ERC721.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n\n  /**\n   * @internal\n   */\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /** ******************************\n   * WRITE FUNCTIONS\n   *******************************/\n\n  /**\n   * Perform airdrop of ERC721 tokens\n   *\n   * @example\n   * ```javascript\n   * // Airdrop content array, with recipients and tokenIds\n   * const contents = [\n   *      {\n   *        recipient: \"0xabc...\", // first recipient address\n   *        tokenId: 0\n   *      },\n   *      {\n   *        recipient: \"0x123...\", // second recipient address\n   *        tokenId: 2\n   *      }\n   *   ]\n   *\n   * const tokenAddress = \"0x...\" // Address of the ERC721 token being airdropped\n   * const tokenOwner = \"0x...\" // Address of the owner of the tokens being airdropped\n   *\n   * const output = await contract.airdrop721.drop(tokenAddress, tokenOwner, contents);\n   *\n   * // the `output` return value above contains:\n   * //     - count of successful and failed drops\n   * //     - array containing failed drops, if any\n   *\n   * ```\n   * @param tokenAddress - Address of the ERC721 token being airdropped\n   * @param tokenOwner - Address of the owner of the tokens being airdropped\n   * @param contents - Array of recipients and tokenIds to airdrop\n   *\n   * @returns An array of recipients for who the airdrop failed (empty means all transfers were successful)\n   * @twfeature AirdropERC721\n   */\n  drop = /* @__PURE__ */buildTransactionFunction(async (tokenAddress, tokenOwner, contents) => {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"airdropERC721\",\n      args: [tokenAddress, tokenOwner, contents],\n      parse: receipt => {\n        const events = this.contractWrapper.parseLogs(\"AirdropFailed\", receipt.logs);\n        const failedDrops = events.map(e => {\n          return {\n            recipient: e.args.recipient,\n            tokenId: e.args.tokenId.toNumber()\n          };\n        });\n        return {\n          successfulDropCount: contents.length - failedDrops.length,\n          failedDropCount: failedDrops.length,\n          failedDrops\n        };\n      }\n    });\n  });\n}\n\n/**\n * @public\n */\nclass Airdrop1155 {\n  featureName = FEATURE_AIRDROP_ERC1155.name;\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n\n  /**\n   * @internal\n   */\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /** ******************************\n   * WRITE FUNCTIONS\n   *******************************/\n\n  /**\n   * Perform airdrop of ERC1155 tokens\n   *\n   * @example\n   * ```javascript\n   * // Airdrop content array, with recipients and tokenIds\n   * const contents = [\n   *      {\n   *        recipient: \"0xabc...\", // first recipient address\n   *        tokenId: 0,\n   *        amount: \"10\" // number of tokens\n   *      },\n   *      {\n   *        recipient: \"0x123...\", // second recipient address\n   *        tokenId: 0\n   *        amount: \"20\" // number of tokens\n   *      }\n   *   ]\n   *\n   * const tokenAddress = \"0x...\" // Address of the ERC1155 token being airdropped\n   * const tokenOwner = \"0x...\" // Address of the owner of the tokens being airdropped\n   *\n   * const output = await contract.airdrop1155.drop(tokenAddress, tokenOwner, contents);\n   *\n   * // the `output` return value above contains:\n   * //     - count of successful and failed drops\n   * //     - array containing failed drops, if any\n   *\n   * ```\n   * @param tokenAddress - Address of the ERC1155 token being airdropped\n   * @param tokenOwner - Address of the owner of the tokens being airdropped\n   * @param contents - Array of recipients and tokenIds to airdrop\n   *\n   * @returns An array of recipients for who the airdrop failed (empty means all transfers were successful)\n   * @twfeature AirdropERC1155\n   */\n  drop = /* @__PURE__ */buildTransactionFunction(async (tokenAddress, tokenOwner, contents) => {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method: \"airdropERC1155\",\n      args: [tokenAddress, tokenOwner, contents],\n      parse: receipt => {\n        const events = this.contractWrapper.parseLogs(\"AirdropFailed\", receipt.logs);\n        const failedDrops = events.map(e => {\n          return {\n            recipient: e.args.recipient,\n            tokenId: e.args.tokenId.toNumber(),\n            amount: e.args.amount.toString()\n          };\n        });\n        return {\n          successfulDropCount: contents.length - failedDrops.length,\n          failedDropCount: failedDrops.length,\n          failedDrops\n        };\n      }\n    });\n  });\n}\n\nexport { Account as A, ContractPublishedMetadata as C, DEFAULT_PERMISSIONS as D, ExtensionManager as E, PermissionSnapshotSchema as P, SignerPermissionsSchema as S, AccountFactory as a, Airdrop20 as b, Airdrop721 as c, Airdrop1155 as d, extractEventsFromAbi as e, AdminFlag as f, SignerPermissionRequestV1 as g, SignerPermissionRequest as h };\n","import { a as assertEnabled } from './assertEnabled-d1700f0b.browser.esm.js';\nimport { a as ContractEvents, G as GasCostEstimator, C as ContractMetadata, d as detectContractFeature, b as ContractAppURI } from './contract-appuri-5c40af52.browser.esm.js';\nimport { bj as AbiSchema, d5 as FEATURE_ROYALTY, d4 as FEATURE_PERMISSIONS, d7 as FEATURE_PRIMARY_SALE, du as FEATURE_PLATFORM_FEE, d6 as FEATURE_OWNER, cI as FEATURE_TOKEN, c$ as FEATURE_NFT, dj as FEATURE_EDITION, cK as FEATURE_APPURI, dA as FEATURE_DIRECT_LISTINGS, dB as FEATURE_ENGLISH_AUCTIONS, dC as FEATURE_OFFERS, dr as FEATURE_AIRDROP_ERC20, ds as FEATURE_AIRDROP_ERC721, dt as FEATURE_AIRDROP_ERC1155, dp as FEATURE_ACCOUNT_FACTORY, dn as FEATURE_ACCOUNT, dq as FEATURE_DYNAMIC_CONTRACT, cs as ContractWrapper, bg as CustomContractSchema, G as ALL_ROLES } from './index-33cd3415.browser.esm.js';\nimport { C as ContractPublishedMetadata, E as ExtensionManager, b as Airdrop20, c as Airdrop721, d as Airdrop1155, a as AccountFactory, A as Account } from './airdrop-erc1155-f9016b81.browser.esm.js';\nimport { C as ContractEncoder } from './fetchCurrencyValue-32d08b05.browser.esm.js';\nimport { C as ContractInterceptor } from './contract-interceptor-d7b164a7.browser.esm.js';\nimport { C as ContractRoyalty, a as ContractOwner } from './contract-owner-49e75547.browser.esm.js';\nimport { C as ContractPlatformFee } from './contract-platform-fee-e756e68f.browser.esm.js';\nimport { C as ContractRoles } from './contract-roles-71988d2e.browser.esm.js';\nimport { C as ContractPrimarySale } from './contract-sales-918c7cb8.browser.esm.js';\nimport { E as Erc1155 } from './erc-1155-7ce9bee1.browser.esm.js';\nimport { E as Erc20 } from './erc-20-9a18a51c.browser.esm.js';\nimport { E as Erc721 } from './erc-721-27306550.browser.esm.js';\nimport { M as MarketplaceV3DirectListings, a as MarketplaceV3EnglishAuctions, b as MarketplaceV3Offers } from './marketplacev3-offers-ce1f096b.browser.esm.js';\nimport { T as Transaction } from './transactions-72f9603c.browser.esm.js';\nimport 'ethers';\nimport 'zod';\nimport '@thirdweb-dev/storage';\nimport '@thirdweb-dev/chains';\nimport '@thirdweb-dev/crypto';\nimport 'tiny-invariant';\nimport 'bn.js';\nimport 'bs58';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDrop.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC20_V2.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20Permit.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMulticall.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IClaimableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDelayedReveal.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC721_V3.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Enumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721AQueryableUpgradeable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Supply.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ILazyMint.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/LazyMintWithTier_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/SharedMetadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/zora_IERC721Drop.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ILoyaltyCard.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/INFTMetadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IClaimableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDrop1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC1155_V2.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155Supply.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155Enumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC2771Context.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAppURI.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IContractMetadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDirectListings.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IEnglishAuctions.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IOffers.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPackVRFDirect.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPermissions.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPermissionsEnumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPlatformFee.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPrimarySale.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IRoyalty.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/Ownable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAirdropERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAirdropERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAirdropERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccountFactoryCore.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccountPermissions.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccountPermissions_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccount.json';\nimport 'ethers/lib/utils';\nimport 'eventemitter3';\nimport './signature-d3ea643d.browser.esm.js';\nimport './normalizePriceValue-9851c0eb.browser.esm.js';\nimport '@thirdweb-dev/merkletree';\nimport './setErc20Allowance-7f76f677.browser.esm.js';\nimport 'uuid';\nimport './fetchSourceFilesFromMetadata-906c835e.browser.esm.js';\nimport './deployContractDeterministic-7823c15c.browser.esm.js';\nimport './QueryParams-32a56510.browser.esm.js';\nimport 'fast-deep-equal';\nimport './drop-claim-conditions-e6f2abbf.browser.esm.js';\nimport './cleanCurrencyAddress-ded19cfe.browser.esm.js';\nimport './marketplace-e3129e2f.browser.esm.js';\n\n/**\n * Custom contract dynamic class with feature detection\n *\n * @example\n *\n * ```javascript\n * import { ThirdwebSDK } from \"@thirdweb-dev/sdk\";\n *\n * const sdk = new ThirdwebSDK(provider);\n * const contract = await sdk.getContract(\"{{contract_address}}\");\n *\n * // call any function in your contract\n * await contract.call(\"myCustomFunction\", [param1, param2]);\n *\n * // if your contract follows an ERC standard, contract.ercXYZ will be present\n * const allNFTs = await contract.erc721.getAll()\n *\n * // if your contract extends a particular contract extension, the corresponding function will be available\n * const tx = await contract.erc721.mint({\n *     name: \"Cool NFT\",\n *     image: readFileSync(\"some_image.png\"),\n *   });\n * ```\n *\n * @contract\n * @public\n */\nclass SmartContract {\n  // utilities\n\n  get abi() {\n    return AbiSchema.parse(this.contractWrapper.abi || []);\n  }\n\n  /**\n   * Handle royalties\n   */\n  get royalties() {\n    return assertEnabled(this.detectRoyalties(), FEATURE_ROYALTY);\n  }\n\n  /**\n   * Handle permissions\n   */\n  get roles() {\n    return assertEnabled(this.detectRoles(), FEATURE_PERMISSIONS);\n  }\n\n  /**\n   * Handle primary sales\n   */\n  get sales() {\n    return assertEnabled(this.detectPrimarySales(), FEATURE_PRIMARY_SALE);\n  }\n\n  /**\n   * Handle platform fees\n   */\n  get platformFees() {\n    return assertEnabled(this.detectPlatformFees(), FEATURE_PLATFORM_FEE);\n  }\n\n  /**\n   * Set and get the owner of the contract\n   */\n  get owner() {\n    return assertEnabled(this.detectOwnable(), FEATURE_OWNER);\n  }\n\n  /**\n   * Auto-detects ERC20 standard functions.\n   */\n  get erc20() {\n    return assertEnabled(this.detectErc20(), FEATURE_TOKEN);\n  }\n\n  /**\n   * Auto-detects ERC721 standard functions.\n   */\n  get erc721() {\n    return assertEnabled(this.detectErc721(), FEATURE_NFT);\n  }\n\n  /**\n   * Auto-detects ERC1155 standard functions.\n   */\n  get erc1155() {\n    return assertEnabled(this.detectErc1155(), FEATURE_EDITION);\n  }\n\n  /**\n   * Auto-detects AppURI standard functions.\n   */\n  get app() {\n    return assertEnabled(this.detectApp(), FEATURE_APPURI);\n  }\n\n  /**\n   * Direct listings\n   * @remarks Create and manage direct listings in your marketplace.\n   * ```javascript\n   * // Data of the listing you want to create\n   * const listing = {\n   *   // address of the contract the asset you want to list is on\n   *   assetContractAddress: \"0x...\",\n   *   // token ID of the asset you want to list\n   *   tokenId: \"0\",\n   *   // how many of the asset you want to list\n   *   quantity: 1,\n   *   // address of the currency contract that will be used to pay for the listing\n   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,\n   *   // The price to pay per unit of NFTs listed.\n   *   pricePerToken: 1.5,\n   *   // when should the listing open up for offers\n   *   startTimestamp: new Date(Date.now()),\n   *   // how long the listing will be open for\n   *   endTimestamp: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000),\n   *   // Whether the listing is reserved for a specific set of buyers.\n   *   isReservedListing: false\n   * }\n   *\n   * const tx = await contract.directListings.createListing(listing);\n   * const receipt = tx.receipt; // the transaction receipt\n   * const id = tx.id; // the id of the newly created listing\n   *\n   * // And on the buyers side:\n   * // The ID of the listing you want to buy from\n   * const listingId = 0;\n   * // Quantity of the asset you want to buy\n   * const quantityDesired = 1;\n   *\n   * await contract.directListings.buyFromListing(listingId, quantityDesired);\n   * ```\n   */\n  get directListings() {\n    return assertEnabled(this.detectDirectListings(), FEATURE_DIRECT_LISTINGS);\n  }\n  /**\n   * Auctions\n   * @remarks Create and manage auctions in your marketplace.\n   * @example\n   * ```javascript\n   * // Data of the auction you want to create\n   * const auction = {\n   *   // address of the contract of the asset you want to auction\n   *   assetContractAddress: \"0x...\",\n   *   // token ID of the asset you want to auction\n   *   tokenId: \"0\",\n   *   // how many of the asset you want to auction\n   *   quantity: 1,\n   *   // address of the currency contract that will be used to pay for the auctioned tokens\n   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,\n   *   // the minimum bid that will be accepted for the token\n   *   minimumBidAmount: \"1.5\",\n   *   // how much people would have to bid to instantly buy the asset\n   *   buyoutBidAmount: \"10\",\n   *   // If a bid is made less than these many seconds before expiration, the expiration time is increased by this.\n   *   timeBufferInSeconds: \"1000\",\n   *   // A bid must be at least this much bps greater than the current winning bid\n   *   bidBufferBps: \"100\", // 100 bps stands for 1%\n   *   // when should the auction open up for bidding\n   *   startTimestamp: new Date(Date.now()),\n   *   // end time of auction\n   *   endTimestamp: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000),\n   * }\n   *\n   * const tx = await contract.englishAuctions.createAuction(auction);\n   * const receipt = tx.receipt; // the transaction receipt\n   * const id = tx.id; // the id of the newly created auction\n   *\n   * // And on the buyers side:\n   * // The auction ID of the asset you want to bid on\n   * const auctionId = 0;\n   * // The total amount you are willing to bid for auctioned tokens\n   * const bidAmount = 1;\n   *\n   * await contract.englishAuctions.makeBid(auctionId, bidAmount);\n   * ```\n   */\n  get englishAuctions() {\n    return assertEnabled(this.detectEnglishAuctions(), FEATURE_ENGLISH_AUCTIONS);\n  }\n\n  /**\n   * Offers\n   * @remarks Make and manage offers.\n   * @example\n   * ```javascript\n   * // Data of the offer you want to make\n   * const offer = {\n   *   // address of the contract the asset you want to make an offer for\n   *   assetContractAddress: \"0x...\",\n   *   // token ID of the asset you want to buy\n   *   tokenId: \"0\",\n   *   // how many of the asset you want to buy\n   *   quantity: 1,\n   *   // address of the currency contract that you offer to pay in\n   *   currencyContractAddress: NATIVE_TOKEN_ADDRESS,\n   *   // Total price you offer to pay for the mentioned token(s)\n   *   totalPrice: \"1.5\",\n   *   // Offer valid until\n   *   endTimestamp: new Date(),\n   * }\n   *\n   * const tx = await contract.offers.makeOffer(offer);\n   * const receipt = tx.receipt; // the transaction receipt\n   * const id = tx.id; // the id of the newly created offer\n   *\n   * // And on the seller's side:\n   * // The ID of the offer you want to accept\n   * const offerId = 0;\n   * await contract.offers.acceptOffer(offerId);\n   * ```\n   */\n  get offers() {\n    return assertEnabled(this.detectOffers(), FEATURE_OFFERS);\n  }\n  get airdrop20() {\n    return assertEnabled(this.detectAirdrop20(), FEATURE_AIRDROP_ERC20);\n  }\n  get airdrop721() {\n    return assertEnabled(this.detectAirdrop721(), FEATURE_AIRDROP_ERC721);\n  }\n  get airdrop1155() {\n    return assertEnabled(this.detectAirdrop1155(), FEATURE_AIRDROP_ERC1155);\n  }\n\n  /**\n   * Account Factory\n   *\n   * @remarks Create accounts and fetch data about them.\n   * @example\n   * ```javascript\n   *\n   * // Predict the address of the account that will be created for an admin.\n   * const deterministicAddress = await contract.accountFactory.predictAccountAddress(admin, extraData);\n   *\n   * // Create accounts\n   * const tx = await contract.accountFactory.createAccount(admin, extraData);\n   * // the same as `deterministicAddress`\n   * const accountAddress = tx.address;\n   *\n   * // Get all accounts created by the factory\n   * const allAccounts = await contract.accountFactory.getAllAccounts();\n   *\n   * // Get all accounts on which a signer has been given authority.\n   * const associatedAccounts = await contract.accountFactory.getAssociatedAccounts(signer);\n   *\n   * // Get all signers who have been given authority on a account.\n   * const associatedSigners = await contract.accountFactory.getAssociatedSigners(accountAddress);\n   *\n   * // Check whether a account has already been created for a given admin.\n   * const isAccountDeployed = await contract.accountFactory.isAccountDeployed(admin, extraData);\n   * ```\n   */\n  get accountFactory() {\n    return assertEnabled(this.detectAccountFactory(), FEATURE_ACCOUNT_FACTORY);\n  }\n\n  // TODO documentation\n  get account() {\n    return assertEnabled(this.detectAccount(), FEATURE_ACCOUNT);\n  }\n  get extensions() {\n    return assertEnabled(this.detectBaseRouter(), FEATURE_DYNAMIC_CONTRACT);\n  }\n  get chainId() {\n    return this._chainId;\n  }\n  constructor(network, address, abi, storage) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    let chainId = arguments.length > 5 ? arguments[5] : undefined;\n    let contractWrapper = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : new ContractWrapper(network, address, abi, options, storage);\n    this._chainId = chainId;\n    this.storage = storage;\n    this.contractWrapper = contractWrapper;\n    this.events = new ContractEvents(this.contractWrapper);\n    this.encoder = new ContractEncoder(this.contractWrapper);\n    this.interceptor = new ContractInterceptor(this.contractWrapper);\n    this.estimator = new GasCostEstimator(this.contractWrapper);\n    this.publishedMetadata = new ContractPublishedMetadata(this.contractWrapper, this.storage);\n    this.metadata = new ContractMetadata(this.contractWrapper, CustomContractSchema, this.storage);\n  }\n  onNetworkUpdated(network) {\n    this.contractWrapper.updateSignerOrProvider(network);\n  }\n  getAddress() {\n    return this.contractWrapper.address;\n  }\n\n  /**\n   * Prepare a transaction for sending\n   */\n  prepare(method, args, overrides) {\n    return Transaction.fromContractWrapper({\n      contractWrapper: this.contractWrapper,\n      method,\n      args,\n      overrides\n    });\n  }\n\n  /**\n   * Call any function on this contract\n   * @example\n   * ```javascript\n   * // read functions will return the data from the contract\n   * const myValue = await contract.call(\"myReadFunction\");\n   * console.log(myValue);\n   *\n   * // write functions will return the transaction receipt\n   * const tx = await contract.call(\"myWriteFunction\", [arg1, arg2]);\n   * const receipt = tx.receipt;\n   *\n   * // Optionally override transaction options\n   * await contract.call(\"myWriteFunction\", [arg1, arg2], {\n   *  gasLimit: 1000000, // override default gas limit\n   *  value: ethers.utils.parseEther(\"0.1\"), // send 0.1 ether with the contract call\n   * };\n   * ```\n   * @param functionName - the name of the function to call\n   * @param args - the arguments of the function\n   */\n  async call(functionName, args, overrides) {\n    return this.contractWrapper.call(functionName, args, overrides);\n  }\n\n  /** ********************\n   * FEATURE DETECTION\n   * ********************/\n\n  detectRoyalties() {\n    if (detectContractFeature(this.contractWrapper, \"Royalty\")) {\n      // ContractMetadata is stateless, it's fine to create a new one here\n      // This also makes it not order dependent in the feature detection process\n      const metadata = new ContractMetadata(this.contractWrapper, CustomContractSchema, this.storage);\n      return new ContractRoyalty(this.contractWrapper, metadata);\n    }\n    return undefined;\n  }\n  detectRoles() {\n    if (detectContractFeature(this.contractWrapper, \"Permissions\")) {\n      return new ContractRoles(this.contractWrapper, ALL_ROLES);\n    }\n    return undefined;\n  }\n  detectPrimarySales() {\n    if (detectContractFeature(this.contractWrapper, \"PrimarySale\")) {\n      return new ContractPrimarySale(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectPlatformFees() {\n    if (detectContractFeature(this.contractWrapper, \"PlatformFee\")) {\n      return new ContractPlatformFee(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectErc20() {\n    if (detectContractFeature(this.contractWrapper, \"ERC20\")) {\n      return new Erc20(this.contractWrapper, this.storage, this.chainId);\n    }\n    return undefined;\n  }\n  detectErc721() {\n    if (detectContractFeature(this.contractWrapper, \"ERC721\")) {\n      return new Erc721(this.contractWrapper, this.storage, this.chainId);\n    }\n    return undefined;\n  }\n  detectErc1155() {\n    if (detectContractFeature(this.contractWrapper, \"ERC1155\")) {\n      return new Erc1155(this.contractWrapper, this.storage, this.chainId);\n    }\n    return undefined;\n  }\n  detectOwnable() {\n    if (detectContractFeature(this.contractWrapper, \"Ownable\")) {\n      return new ContractOwner(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectApp() {\n    const metadata = new ContractMetadata(this.contractWrapper, CustomContractSchema, this.storage);\n    if (detectContractFeature(this.contractWrapper, \"AppURI\")) {\n      return new ContractAppURI(this.contractWrapper, metadata, this.storage);\n    } else if (detectContractFeature(this.contractWrapper, \"ContractMetadata\")) {\n      return new ContractAppURI(this.contractWrapper, metadata, this.storage);\n    }\n    return undefined;\n  }\n  detectDirectListings() {\n    if (detectContractFeature(this.contractWrapper, \"DirectListings\")) {\n      return new MarketplaceV3DirectListings(this.contractWrapper, this.storage);\n    }\n    return undefined;\n  }\n  detectEnglishAuctions() {\n    if (detectContractFeature(this.contractWrapper, \"EnglishAuctions\")) {\n      return new MarketplaceV3EnglishAuctions(this.contractWrapper, this.storage);\n    }\n    return undefined;\n  }\n  detectOffers() {\n    if (detectContractFeature(this.contractWrapper, \"Offers\")) {\n      return new MarketplaceV3Offers(this.contractWrapper, this.storage);\n    }\n    return undefined;\n  }\n  detectBaseRouter() {\n    if (detectContractFeature(this.contractWrapper, FEATURE_DYNAMIC_CONTRACT.name)) {\n      return new ExtensionManager(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectAirdrop20() {\n    if (detectContractFeature(this.contractWrapper, \"AirdropERC20\")) {\n      return new Airdrop20(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectAirdrop721() {\n    if (detectContractFeature(this.contractWrapper, \"AirdropERC721\")) {\n      return new Airdrop721(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectAirdrop1155() {\n    if (detectContractFeature(this.contractWrapper, \"AirdropERC1155\")) {\n      return new Airdrop1155(this.contractWrapper);\n    }\n    return undefined;\n  }\n\n  // ========== Account features ==========\n\n  detectAccountFactory() {\n    if (detectContractFeature(this.contractWrapper, FEATURE_ACCOUNT_FACTORY.name)) {\n      return new AccountFactory(this.contractWrapper);\n    }\n    return undefined;\n  }\n  detectAccount() {\n    if (detectContractFeature(this.contractWrapper, FEATURE_ACCOUNT.name)) {\n      return new Account(this.contractWrapper);\n    }\n    return undefined;\n  }\n}\n\nexport { SmartContract };\n"],"names":["AdminFlag","DEFAULT_PERMISSIONS","startDate","BigNumber","from","expirationDate","approvedCallTargets","nativeTokenLimitPerTransaction","SignerPermissionsSchema","z","object","StartDateSchema","EndDateSchema","AmountSchema","default","union","array","AddressOrEnsSchema","literal","PermissionSnapshotSchema","signer","makeAdmin","boolean","permissions","SignerPermissionRequestV1","name","type","SignerPermissionRequest","AccountPermissions","featureName","FEATURE_ACCOUNT_PERMISSIONS","constructor","contractWrapper","this","getAddress","address","hasDuplicateSigners","snapshot","checkedSigner","signers","map","item","parseSignerPermissionsStruct","Date","parseInt","startTimestamp","toString","endTimestamp","approvedTargets","sendSignerPermissionRequest","signerAddress","adminFlag","payload","signature","generatePayload","Transaction","fromContractWrapper","method","args","isAdmin","valueOf","AddressZero","utils.parseEther","permissionStartTimestamp","permissionEndTimestamp","reqValidityStartTimestamp","reqValidityEndTimestamp","Math","floor","now","getTime","uid","resolveOrGenerateId","undefined","chainId","getChainID","connectedSigner","getSigner","invariant","signTypedData","version","verifyingContract","generateLegacyPayload","Error","resolvedSignerAddress","resolveAddress","read","isSigner","getAllAdmins","getAllSigners","activeSignersWithPerms","Promise","all","async","signerWithPermissions","getAllAdminsAndSigners","admin","grantAdminPermissions","buildTransactionFunction","AddAdmin","revokeAdminPermissions","RemoveAdmin","grantPermissions","resolvedPermissions","parseAsync","None","updatePermissions","revokeAccess","approveTargetForSigner","target","resolvedTarget","includes","newTargets","disapproveTargetForSigner","filter","approvedTarget","utils.getAddress","resetAllPermissions","resolvedSnapshot","permissionSnapshot","removeAdminData","addOrUpdateSignerData","removeSignerData","allAdmins","allToMakeAdmin","forEach","data","encode","push","allSigners","allToMakeSigners","member","Account","FEATURE_ACCOUNT","accountPermissions","detectAccountPermissions","detectContractFeature","assertEnabled","prepare","AccountFactory","FEATURE_ACCOUNT_FACTORY","events","ContractEvents","predictAccountAddress","extraData","utils.toUtf8Bytes","getAssociatedAccounts","getAllAccounts","isAccountDeployed","addr","isContractDeployed","getProvider","createAccount","accountAdmin","parse","receipt","parseLogs","logs","account","ContractPublishedMetadata","storage","get","_cachedMetadata","fetchContractMetadataFromAddress","options","extractSources","publishedMetadata","fetchSourceFilesFromMetadata","extractFunctions","e","extractFunctionsFromAbi","AbiSchema","abi","metadata","extractEvents","el","parsed","doc","extractCommentFromMetadata","inputs","outputs","comment","extractEventsFromAbi","ExtensionManager","FEATURE_DYNAMIC_CONTRACT","readContract","getAll","getAllExtensions","extensionName","getExtension","getExtensionAddress","implementation","getAllFunctions","functions","getExtensionForFunction","functionInput","selector","functionSelector","functionSignature","utils.id","substring","getMetadataForFunction","getExtensionAddressForFunction","add","inputArgs","extension","length","extensionAbi","abiToAdd","filterAbiForAdd","updatedAbi","joinABIs","updateAbi","addDeployed","extensionAddress","extensionMetadataUri","extensionMetadata","parsedMetadata","CommonContractSchema","upload","extensionFunctions","generateExtensionFunctions","metadataURI","addPublished","deployedExtensionAddress","deployExtension","publisherAddress","THIRDWEB_DEPLOYER","extensionMetadataOverride","replace","contractAbi","filterAbiForRemove","replaceDeployed","replacePublished","remove","extensionAbiInterface","utils.Interface","extensionFunctionSelectors","fn","fnFragment","Object","values","fnSigHash","getSighash","fullAbi","abiToRemove","fullAbiInterface","interfaceToRemove","functionsToRemove","arguments","published","fetchPublishedContractFromPolygon","clientId","secretKey","deploymentInfo","getDeploymentInfo","metadataUri","implementationAddress","find","i","transaction","predictedAddress","transactionsToSend","transactionsforDirectDeploy","transactionsForThrowawayDeployer","deployWithThrowawayDeployer","tx","deployContractDeterministic","Airdrop20","FEATURE_AIRDROP_ERC20","drop","tokenAddress","tokenOwner","contents","failedDrops","recipient","amount","successfulDropCount","failedDropCount","Airdrop721","FEATURE_AIRDROP_ERC721","tokenId","toNumber","Airdrop1155","FEATURE_AIRDROP_ERC1155","SmartContract","royalties","detectRoyalties","FEATURE_ROYALTY","roles","detectRoles","FEATURE_PERMISSIONS","sales","detectPrimarySales","FEATURE_PRIMARY_SALE","platformFees","detectPlatformFees","FEATURE_PLATFORM_FEE","owner","detectOwnable","FEATURE_OWNER","erc20","detectErc20","FEATURE_TOKEN","erc721","detectErc721","FEATURE_NFT","erc1155","detectErc1155","FEATURE_EDITION","app","detectApp","FEATURE_APPURI","directListings","detectDirectListings","FEATURE_DIRECT_LISTINGS","englishAuctions","detectEnglishAuctions","FEATURE_ENGLISH_AUCTIONS","offers","detectOffers","FEATURE_OFFERS","airdrop20","detectAirdrop20","airdrop721","detectAirdrop721","airdrop1155","detectAirdrop1155","accountFactory","detectAccountFactory","detectAccount","extensions","detectBaseRouter","_chainId","network","ContractWrapper","encoder","ContractEncoder","interceptor","ContractInterceptor","estimator","GasCostEstimator","ContractMetadata","CustomContractSchema","onNetworkUpdated","updateSignerOrProvider","overrides","call","functionName","ContractRoyalty","ContractRoles","ALL_ROLES","ContractPrimarySale","ContractPlatformFee","Erc20","Erc721","Erc1155","ContractOwner","ContractAppURI","MarketplaceV3DirectListings","MarketplaceV3EnglishAuctions","MarketplaceV3Offers"],"mappings":"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","x_google_ignoreList":[0,1]}