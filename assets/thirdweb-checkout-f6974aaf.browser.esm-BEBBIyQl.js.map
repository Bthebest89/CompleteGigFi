{"version":3,"file":"thirdweb-checkout-f6974aaf.browser.esm-BEBBIyQl.js","sources":["../../node_modules/@thirdweb-dev/sdk/dist/thirdweb-checkout-f6974aaf.browser.esm.js"],"sourcesContent":["import { aS as ChainId } from './index-33cd3415.browser.esm.js';\nimport invariant from 'tiny-invariant';\n\nconst PAPER_API_BASE = `https://paper.xyz/api`;\nconst PAPER_API_VERSION = `2022-08-12`;\n\n/**\n * @internal\n */\nconst PAPER_API_URL = `${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`;\nconst PAPER_CHAIN_ID_MAP = {\n  [ChainId.Mainnet]: \"Ethereum\",\n  [ChainId.Goerli]: \"Goerli\",\n  [ChainId.Polygon]: \"Polygon\",\n  [ChainId.Mumbai]: \"Mumbai\",\n  [ChainId.Avalanche]: \"Avalanche\"\n};\n\n/**\n * @internal\n */\nfunction parseChainIdToPaperChain(chainId) {\n  invariant(chainId in PAPER_CHAIN_ID_MAP, `chainId not supported by paper: ${chainId}`);\n  return PAPER_CHAIN_ID_MAP[chainId];\n}\n/**\n *\n * @param contractAddress - the contract address\n * @param chainId - the chain id\n * @internal\n * @returns The paper xyz contract id\n * @throws if the contract is not registered on paper xyz\n */\nasync function fetchRegisteredCheckoutId(contractAddress, chainId) {\n  const paperChain = parseChainIdToPaperChain(chainId);\n  const res = await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${contractAddress}&chain=${paperChain}`);\n  const json = await res.json();\n  invariant(json.result.id, \"Contract is not registered with paper\");\n  return json.result.id;\n}\n\n/**\n * The parameters for creating a paper.xyz checkout link.\n * @public\n */\n\n/**\n * @internal\n */\n\n/**\n * @internal\n */\n\nconst DEFAULT_PARAMS = {\n  expiresInMinutes: 15,\n  feeBearer: \"BUYER\",\n  sendEmailOnSuccess: true,\n  redirectAfterPayment: false\n};\n\n/**\n * @internal\n */\nasync function createCheckoutLinkIntent(contractId, params) {\n  const res = await fetch(`${PAPER_API_URL}/checkout-link-intent`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      contractId,\n      ...DEFAULT_PARAMS,\n      ...params,\n      metadata: {\n        ...params.metadata,\n        via_platform: \"thirdweb\"\n      },\n      // overrides that are hard coded\n      hideNativeMint: true,\n      hidePaperWallet: !!params.walletAddress,\n      hideExternalWallet: true,\n      hidePayWithCrypto: true,\n      usePaperKey: false\n    })\n  });\n  const json = await res.json();\n  invariant(json.checkoutLinkIntentUrl, \"Failed to create checkout link intent\");\n  return json.checkoutLinkIntentUrl;\n}\n\n/**\n * @internal\n */\nclass PaperCheckout {\n  constructor(contractWrapper) {\n    this.contractWrapper = contractWrapper;\n  }\n  async getCheckoutId() {\n    return fetchRegisteredCheckoutId(this.contractWrapper.address, await this.contractWrapper.getChainID());\n  }\n  async isEnabled() {\n    try {\n      return !!(await this.getCheckoutId());\n    } catch (err) {\n      return false;\n    }\n  }\n  async createLinkIntent(params) {\n    return await createCheckoutLinkIntent(await this.getCheckoutId(), params);\n  }\n}\n\nexport { PaperCheckout as P };\n"],"names":["PAPER_API_URL","PAPER_CHAIN_ID_MAP","ChainId","Mainnet","Goerli","Polygon","Mumbai","Avalanche","async","fetchRegisteredCheckoutId","contractAddress","chainId","paperChain","invariant","parseChainIdToPaperChain","res","fetch","json","result","id","DEFAULT_PARAMS","expiresInMinutes","feeBearer","sendEmailOnSuccess","redirectAfterPayment","PaperCheckout","constructor","contractWrapper","this","getCheckoutId","address","getChainID","isEnabled","err","createLinkIntent","params","contractId","method","headers","body","JSON","stringify","metadata","via_platform","hideNativeMint","hidePaperWallet","walletAddress","hideExternalWallet","hidePayWithCrypto","usePaperKey","checkoutLinkIntentUrl","createCheckoutLinkIntent"],"mappings":"gDAGA,MAMMA,EAAgB,qDAChBC,EAAqB,CACzB,CAACC,EAAQC,SAAU,WACnB,CAACD,EAAQE,QAAS,SAClB,CAACF,EAAQG,SAAU,UACnB,CAACH,EAAQI,QAAS,SAClB,CAACJ,EAAQK,WAAY,aAkBvBC,eAAeC,EAA0BC,EAAiBC,GACxD,MAAMC,EAbR,SAAkCD,GAEhC,OADAE,EAAUF,KAAWV,GACdA,EAAmBU,EAC5B,CAUqBG,CAAyBH,GACtCI,QAAYC,MAAM,GAAGhB,uCAAmDU,WAAyBE,KACjGK,QAAaF,EAAIE,OAEvB,OADAJ,EAAUI,EAAKC,OAAOC,IACfF,EAAKC,OAAOC,EACrB,CAeA,MAAMC,EAAiB,CACrBC,iBAAkB,GAClBC,UAAW,QACXC,oBAAoB,EACpBC,sBAAsB,GAoCxB,MAAMC,EACJ,WAAAC,CAAYC,GACVC,KAAKD,gBAAkBA,CAC3B,CACE,mBAAME,GACJ,OAAOpB,EAA0BmB,KAAKD,gBAAgBG,cAAeF,KAAKD,gBAAgBI,aAC9F,CACE,eAAMC,GACJ,IACE,eAAgBJ,KAAKC,gBACtB,CAAC,MAAOI,GACP,OAAO,CACb,CACA,CACE,sBAAMC,CAAiBC,GACrB,aA7CJ3B,eAAwC4B,EAAYD,GAClD,MAAMpB,QAAYC,MAAM,GAAGhB,yBAAsC,CAC/DqC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBL,gBACGhB,KACAe,EACHO,SAAU,IACLP,EAAOO,SACVC,aAAc,YAGhBC,gBAAgB,EAChBC,kBAAmBV,EAAOW,cAC1BC,oBAAoB,EACpBC,mBAAmB,EACnBC,aAAa,MAGXhC,QAAaF,EAAIE,OAEvB,OADAJ,EAAUI,EAAKiC,uBACRjC,EAAKiC,qBACd,CAoBiBC,OAA+BvB,KAAKC,gBAAiBM,EACtE","x_google_ignoreList":[0]}